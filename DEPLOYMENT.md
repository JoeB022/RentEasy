# RentEasy Deployment Guide - Render.com

This guide will help you deploy your RentEasy application to Render.com for both backend and frontend.

## üöÄ Quick Deployment

### Option 1: One-Click Deploy (Recommended)

1. **Fork this repository** to your GitHub account
2. **Connect to Render**:
   - Go to [render.com](https://render.com)
   - Sign up/Login with GitHub
   - Click "New +" ‚Üí "Blueprint"
   - Connect your forked repository
   - Select the `render.yaml` file
   - Click "Apply"

### Option 2: Manual Deployment

#### Backend Deployment

1. **Create Web Service**:
   - Go to Render Dashboard
   - Click "New +" ‚Üí "Web Service"
   - Connect your GitHub repository
   - Configure:
     - **Name**: `renteasy-backend`
     - **Environment**: `Python 3`
     - **Build Command**: 
       ```bash
       cd backend && pip install -r requirements-prod.txt && python manage.py setup-db --upgrade
       ```
     - **Start Command**: 
       ```bash
       cd backend && gunicorn -c gunicorn.conf.py wsgi:application
       ```

2. **Environment Variables**:
   ```
   SECRET_KEY=your-secret-key-here
   JWT_SECRET_KEY=your-jwt-secret-key-here
   DATABASE_URL=postgresql://user:pass@host:port/dbname
   FRONTEND_URL=https://your-frontend-url.onrender.com
   ENV=production
   LOG_LEVEL=INFO
   LOG_FORMAT=json
   ```

3. **Create Database**:
   - Go to "New +" ‚Üí "PostgreSQL"
   - Name: `renteasy-db`
   - Plan: Starter (Free)
   - Copy the connection string to `DATABASE_URL`

#### Frontend Deployment

1. **Create Static Site**:
   - Go to Render Dashboard
   - Click "New +" ‚Üí "Static Site"
   - Connect your GitHub repository
   - Configure:
     - **Name**: `renteasy-frontend`
     - **Build Command**: 
       ```bash
       cd frontend && npm install && npm run build
       ```
     - **Publish Directory**: `frontend/dist`

2. **Environment Variables**:
   ```
   VITE_API_URL=https://your-backend-url.onrender.com
   ```

## üîß Configuration Files

### Backend Configuration

**File**: `backend/requirements-prod.txt`
- Production dependencies including Gunicorn, PostgreSQL driver
- All necessary packages for Render deployment

**File**: `backend/gunicorn.conf.py`
- Gunicorn configuration optimized for Render
- Worker processes, timeouts, logging

**File**: `backend/wsgi.py`
- WSGI entry point for production
- Creates Flask app with production config

### Frontend Configuration

**File**: `frontend/vite.config.js`
- Vite configuration with production optimizations
- Code splitting, minification, asset optimization

**File**: `frontend/package.json`
- All dependencies and build scripts
- Production-ready configuration

## üåê Environment Variables

### Backend Environment Variables

| Variable | Description | Example |
|----------|-------------|---------|
| `SECRET_KEY` | Flask secret key | Generated by Render |
| `JWT_SECRET_KEY` | JWT signing key | Generated by Render |
| `DATABASE_URL` | PostgreSQL connection | `postgresql://user:pass@host:port/db` |
| `FRONTEND_URL` | Frontend URL | `https://renteasy-frontend.onrender.com` |
| `REDIS_URL` | Redis connection (optional) | `redis://user:pass@host:port` |
| `ENV` | Environment | `production` |
| `LOG_LEVEL` | Logging level | `INFO` |
| `LOG_FORMAT` | Log format | `json` |

### Frontend Environment Variables

| Variable | Description | Example |
|----------|-------------|---------|
| `VITE_API_URL` | Backend API URL | `https://renteasy-backend.onrender.com` |

## üìä Render Service Plans

### Free Tier (Starter)
- **Backend**: 750 hours/month, sleeps after 15 min inactivity
- **Frontend**: Unlimited static hosting
- **Database**: 1GB PostgreSQL, 1GB Redis
- **Bandwidth**: 100GB/month

### Paid Plans
- **Starter**: $7/month - Always on, custom domains
- **Standard**: $25/month - More resources, better performance

## üîÑ Deployment Process

### Automatic Deployment
- **Trigger**: Push to main branch
- **Build**: Runs build commands automatically
- **Deploy**: Updates services with new code
- **Health Check**: Verifies services are running

### Manual Deployment
- **Build Logs**: Available in Render dashboard
- **Service Logs**: Real-time application logs
- **Metrics**: Performance and usage statistics

## üõ†Ô∏è Post-Deployment Setup

### 1. Create Admin User
```bash
# Use Render Shell or connect via SSH
python manage.py create-admin --email admin@yourdomain.com --password yourpassword
```

### 2. Verify Services
- **Backend Health**: `https://your-backend.onrender.com/health`
- **Frontend**: `https://your-frontend.onrender.com`
- **API Endpoints**: Test authentication and properties

### 3. Custom Domain (Optional)
- Add custom domain in Render dashboard
- Update DNS records
- Update `FRONTEND_URL` environment variable

## üö® Troubleshooting

### Common Issues

1. **Build Failures**:
   - Check build logs in Render dashboard
   - Verify all dependencies in requirements files
   - Ensure Python/Node versions are compatible

2. **Database Connection**:
   - Verify `DATABASE_URL` format
   - Check database service is running
   - Run migrations manually if needed

3. **CORS Issues**:
   - Update `FRONTEND_URL` environment variable
   - Check CORS configuration in backend

4. **Static Files**:
   - Verify `staticPublishPath` is correct
   - Check build output directory

### Debug Commands

```bash
# Check service status
curl https://your-backend.onrender.com/health

# View logs
# Available in Render dashboard under "Logs"

# Test API endpoints
curl -X POST https://your-backend.onrender.com/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"test@example.com","password":"test123"}'
```

## üìà Monitoring

### Render Dashboard
- **Service Status**: Uptime and health checks
- **Logs**: Real-time application logs
- **Metrics**: CPU, memory, response times
- **Alerts**: Email notifications for issues

### Health Endpoints
- **Basic Health**: `/health`
- **Detailed Health**: `/healthz`
- **Readiness**: `/health/ready`
- **Liveness**: `/health/live`
- **Metrics**: `/health/metrics`

## üîê Security Considerations

### Production Security
- **HTTPS**: Automatically enabled on Render
- **Environment Variables**: Secure storage
- **Database**: Isolated and encrypted
- **CORS**: Properly configured
- **Rate Limiting**: Implemented in backend

### Secrets Management
- **Never commit secrets** to repository
- **Use Render environment variables**
- **Rotate keys regularly**
- **Monitor access logs**

## üéØ Performance Optimization

### Backend
- **Gunicorn Workers**: Optimized for Render
- **Database Pooling**: Connection management
- **Caching**: Redis for session storage
- **Compression**: Gzip enabled

### Frontend
- **Code Splitting**: Automatic chunking
- **Asset Optimization**: Minification and compression
- **CDN**: Global content delivery
- **Caching**: Static asset caching

## üìû Support

### Render Support
- **Documentation**: [render.com/docs](https://render.com/docs)
- **Community**: [community.render.com](https://community.render.com)
- **Status**: [status.render.com](https://status.render.com)

### Application Support
- **Health Checks**: Built-in monitoring
- **Logs**: Comprehensive logging
- **Metrics**: Performance tracking
- **Alerts**: Proactive notifications

---

## üéâ Success!

Once deployed, your RentEasy application will be:
- ‚úÖ **Scalable**: Auto-scaling based on demand
- ‚úÖ **Secure**: HTTPS, environment variables, CORS
- ‚úÖ **Monitored**: Health checks, logs, metrics
- ‚úÖ **Fast**: CDN, caching, optimization
- ‚úÖ **Reliable**: 99.9% uptime SLA

Your application is now live and ready for users! üöÄ
